<h1></h1>

<div id="post"></div>
<h3 class="text-center">Comments</h3>
<hr>
<form class="form-horizontal">
    <div class="form-group">
        <div class="col-sm-10">
            <textarea name="body" class="form-control" required="required"></textarea>
        </div>
    </div>

    <div class="form-group">
        <div class="col-sm-10">
            <button type="submit" class="btn btn-primary">Submit</button>
        </div>
    </div>
</form>

<div id="comments"></div>

<script>
    var post = posts[index];
    $('h1').text(post.title);
    $('#post').html(post.body);
    renderComments();

    // Send the form comment
    $('button').click(e => {
        e.preventDefault();
        post.comments = post.comments || [];
        post.comments.unshift({
            title: $('input[name=title]').val(),
            body: $('textarea[name=body]').val(),
        });
        renderComments();
    });

    function renderComments() {
        if (post.comments) {
            let comments = '<ul class="list-group">';
            post.comments.forEach(comment => {
                comments += `<li class='list-group-item'>${comment.body}</li>`;
            });
            comments += '</ul>';
            $('#comments').html(comments);
        }
    }
    $('textarea').wysihtml5();
</script>
